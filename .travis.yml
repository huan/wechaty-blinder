matrix:
  include:
    - os: linux

language: node_js
node_js:
  - "8"

cache:
  directories:
    - node_modules

before_install: # switch to python 3.5
  - source ~/virtualenv/python3.5/bin/activate

install:
  - sudo apt-get install libcairo2-dev libjpeg8-dev libpango1.0-dev libgif-dev build-essential g++
  - npm install --unsafe-perm

script:
  - echo $TRAVIS_OS_NAME
  - python3 --version
  - node --version
  - npm --version
  - npm run test

notifications:
  email:
    on_success: change
    on_failure: change
    on_start: never
    on_cancel: never
    on_error: never

deploy:
  - provider: script
    script: curl -X POST -d '{"from":"travis"}' "$DOCKER_REBUILD_URL"
